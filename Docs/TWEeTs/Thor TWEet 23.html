<div class="wikidoc">
<h2 align="center">Thor TWEeT #23: Buffer overrun detected!</h2>
<p>There is a nasty error, “Buffer overrun”, that be-devils a small number of users of PEM Editor and IntellisenseX:</p>
<p><a href="http://download-codeplex.sec.s-msft.com/Download?ProjectName=vfpx&DownloadId=932046"><img title="SNAGHTML16f6fb" border="0" alt="SNAGHTML16f6fb" src="http://download-codeplex.sec.s-msft.com/Download?ProjectName=vfpx&DownloadId=932047" width="500" height="248" style="border-left-width:0px; border-right-width:0px; border-bottom-width:0px; padding-top:0px; padding-left:0px; display:inline; padding-right:0px; border-top-width:0px"></a></p>
<p>This error is a close cousin of the better known C5 error: it blows your FoxPro session away and all un-saved changes are lost. Unlike C5, though, there is no hint in the
<em>vfp9err.log</em> file.</p>
<p>When this error was first reported back in 2009, the cause was unknown, although it was learned that the error only occurred for some specific classes (always occurring for these classes). Furthermore, it was determined that the error was reproducible outside
 of PEM Editor, like this:</p>
<p><a href="http://download-codeplex.sec.s-msft.com/Download?ProjectName=vfpx&DownloadId=932048"><img title="SNAGHTML315725" border="0" alt="SNAGHTML315725" src="http://download-codeplex.sec.s-msft.com/Download?ProjectName=vfpx&DownloadId=932049" width="548" height="123" style="border-left-width:0px; border-right-width:0px; border-bottom-width:0px; padding-top:0px; padding-left:0px; display:inline; padding-right:0px; border-top-width:0px"></a></p>
<p>A work-around was added to PEM Editor, wherein this call to AMembers was avoided for classes whose names were found in a table created for this use.&nbsp; While cumbersome, this solution was better than nothing.</p>
<p>Recently, I encountered this problem for the first time in my own code and was able to identify the root cause of the problem.&nbsp; Curiously, it happens because of the innocuous code shown here:
</p>
<p><a href="http://download-codeplex.sec.s-msft.com/Download?ProjectName=vfpx&DownloadId=932050"><img title="SNAGHTML2e3cb2" border="0" alt="SNAGHTML2e3cb2" src="http://download-codeplex.sec.s-msft.com/Download?ProjectName=vfpx&DownloadId=932051" width="538" height="484" style="border-left-width:0px; border-right-width:0px; border-bottom-width:0px; padding-top:0px; padding-left:0px; display:inline; padding-right:0px; border-top-width:0px"></a></p>
<p>After some testing (and getting blown out of FoxPro many times), I was able to learn that the problem has to do with the length of the LParameters statement.&nbsp; The limit is 255 characters (not a surprise) but the character count includes all the white
 space, semi-colons, carriage returns and line feeds. When I modified that statement to fit all on one line, removing all the extra unneeded space, the error evaporated.</p>
<p>I was contacted by Tore Bleken this past week about these Buffer Overun problems in classes based on classes of FoxInCloud.&nbsp; He has reported that changing the LParameters statements in the parent classes cured the problem.</p>
</div><div class="ClearBoth"></div>